<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portalt - System Design</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header bg-white shadow-sm py-3 fixed-top">
        <div class="container">
            <div class="row align-items-center justify-content-between">
                <div class="col-md-3">
                    <div class="d-flex align-items-center">
                        <img src="assets/images/Portalt-Logo.png" alt="Portalt Logo" class="logo me-3">
                    </div>
                </div>
                <div class="col-md-9">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                                <li class="nav-item"><a class="nav-link" href="requirements.html">Requirements</a></li>
                                <li class="nav-item"><a class="nav-link" href="research.html">Research</a></li>
                                <li class="nav-item"><a class="nav-link" href="ui-design.html">UI Design</a></li>
                                <li class="nav-item"><a class="nav-link active" href="system-design.html">System Design</a></li>
                                <li class="nav-item"><a class="nav-link" href="implementation.html">Implementation</a></li>
                                <li class="nav-item"><a class="nav-link" href="testing.html">Testing</a></li>
                                <li class="nav-item"><a class="nav-link" href="evaluation.html">Evaluation</a></li>
                                <li class="nav-item"><a class="nav-link" href="appendices.html">Appendices</a></li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <!-- Page Title -->
    <section class="page-title py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <h1 class="display-4 fw-bold">System Design</h1>
                    <p class="lead">Architectural design and technical specifications of the Portalt platform</p>
                </div>
            </div>
        </div>
    </section>

    <!-- System Architecture -->
    <section id="system-architecture" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card border-0 shadow rounded-4 p-4 bg-white" data-aos="fade-up">
                        <div class="card-body">
                            <h2 class="mb-4">System Architecture</h2>
                            
                            <div class="mb-4">
                                <p class="lead">Portalt's architecture is designed as a modern, scalable system that seamlessly integrates virtual reality experiences with advanced AI capabilities. The platform is structured into four main layers: Frontend, Authentication, Storage, and Compute. This layered architecture ensures clear separation of concerns while enabling robust communication between components. The Frontend Layer provides intuitive interfaces for both administrators and end-users, the Authentication Layer ensures secure access control, the Storage Layer manages both local and cloud-based data, and the Compute Layer powers real-time interactions and AI services. Each layer is built with scalability, maintainability, and extensibility in mind, utilizing industry-standard design patterns and best practices.</p>
                            </div>
                            
                            <div class="mb-5">
                                <img src="assets/images/graphs-n-schemas/system-architecture.png" alt="System Architecture Diagram" class="img-fluid rounded-4 mb-4" style="max-height: 600px; width: auto; display: block; margin: 0 auto;">
                            </div>
                            
                            <h3 class="h4 mb-4">Component Description</h3>
                            
                            <h4 class="h5 mb-3">Frontend Layer</h4>
<ul class="list-unstyled mb-4">
    <li class="mb-3">
        <strong>NextJS Admin Platform:</strong> A comprehensive administrative dashboard for managing VR experiences and content.
        <ul class="list-unstyled ms-4">
            <li class="mb-2">
                <strong>Scene Management:</strong>
                <ul class="list-unstyled ms-4">
                    <li>• Create and manage VR activities and scenes with drag-and-drop interface for 3D models</li>
                </ul>
            </li>
            <li class="mb-2">
                <strong>Activity Management:</strong>
                <ul class="list-unstyled ms-4">
                    <li>• Create and organize VR activities</li>
                    <li>• Set up interactive elements and triggers</li>
                </ul>
            </li>
            <li class="mb-2">
                <strong>Asset Management:</strong>
                <ul class="list-unstyled ms-4">
                    <li>• Upload and manage 3D models and assets</li>
                    <li>• Preview 3D models before use</li>
                    <li>• Track asset usage across activities</li>
                </ul>
            </li>
            <li class="mb-2">
                <strong>Organization Management:</strong>
                <ul class="list-unstyled ms-4">
                    <li>• Create and manage multiple organizations</li>
                    <li>• Generate secure pairing codes for organization activities editing access</li>
                    <li>• Set up organization-specific content and settings</li>
                    <li>• Manage user roles and permissions</li>
                </ul>
            </li>
            <li class="mb-2">
                <strong>Document Management:</strong>
                <ul class="list-unstyled ms-4">
                    <li>• Upload and organize supporting documents</li>
                    <li>• Link documents to specific activities</li>
                </ul>
            </li>
        </ul>
    </li>
    <li class="mb-3">
        <strong>VR Activity Editor App:</strong> A Unity application for editing VR activities.
        <ul class="list-unstyled ms-4">
            <li>• Integrates with local SQLite storage</li>
            <li>• Supports scene object configuration</li>
            <li>• Features asset management system</li>
        </ul>
    </li>
    <li class="mb-3">
        <strong>VR Activity Visitor App:</strong> The end-user facing application for experiencing the VR activities.
        <ul class="list-unstyled ms-4">
            <li>• Connects to Ubiq server for multiplayer</li>
            <li>• Implements WebRTC-based communication</li>
            <li>• Features real-time scene synchronization</li>
            <li>• Supports voice interaction capabilities</li>
        </ul>
    </li>
</ul>

<h4 class="h5 mb-3">Authentication Layer</h4>
<ul class="list-unstyled mb-4">
    <li class="mb-3">
        <strong>Clerk Auth Service:</strong> Handles user authentication, authorization, and organization management across the platform.
        <ul class="list-unstyled ms-4">
            <li>• Implements organization-based access control</li>
            <li>• Features pairing code system for organization access</li>
            <li>• Provides secure token management</li>
            <li>• Supports multi-organization structure</li>
            <li>• Implements role-based permissions</li>
            <li>• Features secure session management</li>
        </ul>
    </li>
    <li class="mb-3">
        <strong>Pairing System:</strong> Secure organization access management
        <ul class="list-unstyled ms-4">
            <li>• Generates unique 6-character pairing codes</li>
            <li>• Implements 24-hour code expiration</li>
            <li>• Features active/inactive code status</li>
            <li>• Provides organization-specific access</li>
            <li>• Supports secure code validation</li>
        </ul>
    </li>
</ul>

<h4 class="h5 mb-3">Storage Layer</h4>
                <ul class="list-unstyled mb-4">
                    <li class="mb-3">
                        <strong>Local SQLite DB:</strong> Stores activities and assets metadata along with configuration data locally.
                        <ul class="list-unstyled ms-4">
                            <li>• Implements MongoDB-like Collection interface</li>
                            <li>• Features JSON-based document storage</li>
                            <li>• Supports complex query operations</li>
                            <li>• Implements efficient indexing system</li>
                            <li>• Features automatic table creation</li>
                            <li>• Provides transaction support</li>
                            <li>• Implements WAL journaling mode</li>
                        </ul>
                    </li>
                    <li class="mb-3">
                        <strong>IBM Cloud Object Storage:</strong> Cloud storage and retrieval solution for assets and documents files.
                        <ul class="list-unstyled ms-4">
                            <li>• Implements secure file upload/download</li>
                            <li>• Features asset versioning</li>
                            <li>• Supports large file handling</li>
                            <li>• Provides CDN integration</li>
                            <li>• Implements efficient caching</li>
                            <li>• Features access control integration</li>
                        </ul>
                    </li>
                    <li class="mb-3">
                        <strong>Data Management Features:</strong>
                        <ul class="list-unstyled ms-4">
                            <li>• Implements Repository pattern for data access</li>
                            <li>• Features automatic schema validation</li>
                            <li>• Supports complex data relationships</li>
                            <li>• Provides efficient query optimization</li>
                            <li>• Implements data integrity checks</li>
                            <li>• Features automatic backup support</li>
                        </ul>
                    </li>
                </ul>

                            <h4 class="h5 mb-3">Compute Layer</h4>
                            <div class="mb-4">
                                <p class="mb-3">The Compute Layer serves as the core processing engine of the system, handling real-time communication, AI services, and data processing. It's built on a modular architecture using several design patterns to ensure scalability, maintainability, and extensibility.</p>
                                
                                <h5 class="h6 mt-4">1. Ubiq Server</h5>
                                <p class="mb-2">Central multiplayer server for Unity communication implemented with NodeJS.</p>
                                <ul class="list-unstyled ms-4 mb-3">
                                    <li>• Manages WebRTC connections</li>
                                    <li>• Handles real-time player synchronization</li>
                                    <li>• Implements Mediator pattern for message routing</li>
                                    <li>• Provides room management and peer connection handling</li>
                                    <li>• Supports real-time data streaming</li>
                                    <li>• Uses event-based communication</li>
                                </ul>

                                <h5 class="h6 mt-4">2. Genie Services Framework</h5>
                                <p class="mb-2">Modular service architecture for AI capabilities, built on the ServiceController base class.</p>
                                <ul class="list-unstyled ms-4 mb-3">
                                    <li class="mb-3">
                                        <strong>RAG Service:</strong>
                                        <ul class="list-unstyled ms-4">
                                            <li>• Retrieval-Augmented Generation</li>
                                            <li>• Context-aware response generation</li>
                                            <li>• Document retrieval and processing</li>
                                            <li>• Integration with vector store</li>
                                        </ul>
                                    </li>
                                    <li class="mb-3">
                                        <strong>STT Service:</strong>
                                        <ul class="list-unstyled ms-4">
                                            <li>• Speech-to-Text conversion</li>
                                            <li>• Real-time audio processing</li>
                                            <li>• Wake word detection</li>
                                            <li>• Multi-user support</li>
                                        </ul>
                                    </li>
                                    <li class="mb-3">
                                        <strong>TTS Service:</strong>
                                        <ul class="list-unstyled ms-4">
                                            <li>• Text-to-Speech synthesis</li>
                                            <li>• Voice customization</li>
                                            <li>• Streaming audio output</li>
                                            <li>• WebSocket-based communication</li>
                                        </ul>
                                    </li>
                                </ul>

                                <h5 class="h6 mt-4">3. Whisper Processing Service</h5>
                                <p class="mb-2">Advanced speech processing service with standalone integration.</p>
                                <ul class="list-unstyled ms-4 mb-3">
                                    <li>• Efficient local processing</li>
                                    <li>• High-speed speech recognition</li>
                                    <li>• Multi-language support</li>
                                    <li>• Real-time transcription using OpenAI Whisper</li>
                                    <li>• Voice synthesis using Whisper Speech</li>
                                    <li>• WebSocket-based communication</li>
                                </ul>

                                <h5 class="h6 mt-4">4. Granite LLM Service</h5>
                                <p class="mb-2">Quantized local LLM processing (3.2B parameters) with REST API interface.</p>
                                <ul class="list-unstyled ms-4 mb-3">
                                    <li>• Efficient local processing</li>
                                    <li>• Low latency responses</li>
                                    <li>• Context-aware generation</li>
                                    <li>• Resource-optimized operation</li>
                                </ul>

                                <h5 class="h6 mt-4">Integration & Performance</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="fw-bold mb-2">Unity Integration</h6>
                                        <ul class="list-unstyled ms-4 mb-3">
                                            <li>• WebRTC-based communication</li>
                                            <li>• Real-time audio streaming</li>
                                            <li>• Event-based message passing</li>
                                            <li>• State synchronization</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="fw-bold mb-2">Performance Optimization</h6>
                                        <ul class="list-unstyled ms-4 mb-3">
                                            <li>• Local processing for low latency</li>
                                            <li>• Optimized audio streaming</li>
                                            <li>• Efficient message routing</li>
                                            <li>• Resource management</li>
                                        </ul>
                                    </div>
                                </div>

                                <h5 class="h6 mt-4">Security & Monitoring</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="fw-bold mb-2">Security Measures</h6>
                                        <ul class="list-unstyled ms-4 mb-3">
                                            <li>• WebSocket encryption</li>
                                            <li>• JWT-based authentication</li>
                                            <li>• Process isolation</li>
                                            <li>• Rate limiting</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="fw-bold mb-2">Monitoring</h6>
                                        <ul class="list-unstyled ms-4 mb-3">
                                            <li>• Service health checks</li>
                                            <li>• Structured logging</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Site Map -->
    <section id="site-map" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card border-0 shadow rounded-4 p-4 bg-white" data-aos="fade-up">
                        <div class="card-body">
                            <h2 class="mb-4">Site Map</h2>
                            
                            <img src="assets/images/graphs-n-schemas/site-map.png" alt="Site Map Diagram" Diagram" class="img-fluid rounded-4 mb-4">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sequence Diagrams -->
    <section id="sequence-diagrams" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card border-0 shadow rounded-4 p-4 bg-white" data-aos="fade-up">
                        <div class="card-body">
                            <h2 class="mb-4">Sequence Diagrams</h2>
                            
                            <div class="mb-5">
                                <h3 class="h4 mb-3">Scene Creation Flow</h3>
                                <img src="assets/images/graphs-n-schemas/scene-creation-diagram.png" alt="Scene Creation Flow Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 90%; max-height: 500px; width: auto; display: block; margin: 0 auto;">
                                <div class="diagram-description">
                                    <p class="mb-3"><strong>Purpose:</strong> Illustrates the process of creating and configuring a new scene in the system.</p>
                                    <p class="mb-3"><strong>Flow Description:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Client initiates scene creation with activity and organization IDs</li>
                                        <li>• Scene Service creates a new scene record in the database</li>
                                        <li>• Client adds scene configuration which is stored in the database</li>
                                        <li>• Scene objects are added and validated by the Asset Service</li>
                                        <li>• Complete scene data is returned to the client</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="mb-5">
                                <h3 class="h4 mb-3">Pairing Code Generation and Validation Flow</h3>
                                <img src="assets/images/graphs-n-schemas/pairing-diagram.png" alt="Pairing Code Flow Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 90%; max-height: 500px; width: auto; display: block; margin: 0 auto;">
                                <div class="diagram-description">
                                    <p class="mb-3"><strong>Purpose:</strong> Illustrates the process of generating and validating pairing codes for organization access.</p>
                                    <p class="mb-3"><strong>Flow Description:</strong></p>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h5 class="h6 mb-2">Pairing Code Generation:</h5>
                                            <ul class="list-unstyled ms-4 mb-3">
                                                <li>• Client requests new pairing code</li>
                                                <li>• PairingService generates 6-character code</li>
                                                <li>• Code is stored with organization ID</li>
                                                <li>• 24-hour expiration time is set</li>
                                                <li>• Code is returned to client</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h5 class="h6 mb-2">Pairing Code Validation:</h5>
                                            <ul class="list-unstyled ms-4 mb-3">
                                                <li>• Client submits code</li>
                                                <li>• PairingService queries database</li>
                                                <li>• System checks validity and expiration</li>
                                                <li>• Validation result returned</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-5">
                                <h3 class="h4 mb-3">Ubiq-Genie Interaction Flow</h3>
                                <img src="assets/images/graphs-n-schemas/ubiq-genie-diagram.png" alt="Ubiq-Genie Flow Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 90%; max-height: 500px; width: auto; display: block; margin: 0 auto;">
                                <div class="diagram-description">
                                    <p class="mb-3"><strong>Purpose:</strong> Demonstrates the flow of voice interaction and AI response generation in the system.</p>
                                    <p class="mb-3"><strong>Components and Flow:</strong></p>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h5 class="h6 mb-2">Main Components:</h5>
                                            <ul class="list-unstyled ms-4 mb-3">
                                                <li>• Unity Scene (Client)</li>
                                                <li>• MediaReceiver (Audio)</li>
                                                <li>• Speech-to-Text Service</li>
                                                <li>• RAG Service</li>
                                                <li>• Local LLM Server</li>
                                                <li>• Text-to-Speech Service</li>
                                                <li>• NetworkScene (Server)</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h5 class="h6 mb-2">Sequence of Events:</h5>
                                            <ul class="list-unstyled ms-4 mb-3">
                                                <li>• User speaks into microphone</li>
                                                <li>• Audio data processed</li>
                                                <li>• Speech detected and transcribed</li>
                                                <li>• RAG service queries LLM</li>
                                                <li>• Response converted to speech</li>
                                                <li>• Audio played to user</li>
                                                <li>• Agent performs gestures</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Design Patterns -->
    <section id="design-patterns" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card border-0 shadow rounded-4 p-4 bg-white" data-aos="fade-up">
                        <div class="card-body">
                            <h2 class="mb-4">Design Patterns</h2>

                            <!-- Ubiq-Genie Patterns -->
                            <div class="mb-5">
                                <h3 class="h4 mb-4">Ubiq-Genie Patterns</h3>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">1. Observer Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Event handling and communication between components</p>
                                    <p class="mb-3"><strong>Implementation:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Base class: <code>EventEmitter</code> from Node.js</li>
                                        <li>• Used in: <code>ServiceController</code>, <code>MessageReader</code>, <code>MediaReceiver</code></li>
                                    </ul>
                                    <p class="mb-2"><strong>Key features:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Event-based communication</li>
                                        <li>• Loose coupling between components</li>
                                        <li>• Asynchronous event handling</li>
                                    </ul>
                                    <div class="mermaid mb-4">
                                        <img src="assets/images/graphs-n-schemas/observer-diagram.png" alt="Observer Pattern Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 50%; max-height: 300px; width: auto; display: block; margin: 0 auto;">
                                    </div>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">2. Template Method Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Standardize service initialization and lifecycle</p>
                                    <p class="mb-3"><strong>Implementation:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Base class: <code>ApplicationController</code></li>
                                        <li>• Used in: <code>ConversationalAgent</code></li>
                                    </ul>
                                    <p class="mb-2"><strong>Key features:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Abstract initialization steps</li>
                                        <li>• Consistent component registration</li>
                                        <li>• Standardized pipeline definition</li>
                                    </ul>
                                    <div class="mermaid mb-4">
                                        <img src="assets/images/graphs-n-schemas/template-diagram.png" alt="Template Method Pattern Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 50%; max-height: 300px; width: auto; display: block; margin: 0 auto;">
                                    </div>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">3. Factory Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Component creation and initialization</p>
                                    <p class="mb-3"><strong>Implementation:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Used in: <code>ConversationalAgent.registerComponents()</code></li>
                                    </ul>
                                    <p class="mb-2"><strong>Key features:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Centralized component creation</li>
                                        <li>• Dependency injection</li>
                                        <li>• Component lifecycle management</li>
                                    </ul>
                                    <div class="mermaid mb-4">
                                        <img src="assets/images/graphs-n-schemas/factory-diagram.png" alt="Factory Pattern Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 50%; max-height: 300px; width: auto; display: block; margin: 0 auto;">
                                    </div>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">4. Strategy Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Service implementation variations</p>
                                    <p class="mb-3"><strong>Implementation:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Used in: Service implementations (STT, TTS, RAG)</li>
                                    </ul>
                                    <p class="mb-2"><strong>Key features:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Interchangeable service implementations</li>
                                        <li>• Runtime service selection</li>
                                        <li>• Service-specific configuration</li>
                                    </ul>
                                    <div class="mermaid mb-4">
                                        <img src="assets/images/graphs-n-schemas/strategy-diagram.png" alt="Strategy Pattern Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 50%; max-height: 300px; width: auto; display: block; margin: 0 auto;">
                                    </div>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">5. Mediator Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Centralized communication control</p>
                                    <p class="mb-3"><strong>Implementation:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Used in: <code>NetworkScene</code> as mediator</li>
                                    </ul>
                                    <p class="mb-2"><strong>Key features:</strong></p>
                                    <ul class="list-unstyled ms-4 mb-3">
                                        <li>• Centralized message routing</li>
                                        <li>• Decoupled component communication</li>
                                        <li>• Event coordination</li>
                                    </ul>
                                    <div class="mermaid mb-4">
                                        <img src="assets/images/graphs-n-schemas/mediator-diagram.png" alt="Mediator Pattern Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 50%; max-height: 300px; width: auto; display: block; margin: 0 auto;">
                                    </div>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">Pattern Relationships</h4>
                                    <div class="mermaid mb-4">
                                        <img src="assets/images/graphs-n-schemas/patterns-rel-diagram.png" alt="Patterns Relationships Diagram" class="img-fluid rounded-4 mb-4" style="max-width: 60%; max-height: 400px; width: auto; display: block; margin: 0 auto;">
                                    </div>
                                </div>
                            </div>

                            <!-- Admin App Patterns -->
                            <div class="mb-5">
                                <h3 class="h4 mb-4">Admin App Patterns</h3>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">1. Repository Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Abstracts data persistence operations</p>
                                    <p class="mb-3"><strong>Implementation:</strong> Collection class in db.ts</p>
                                    <pre class="bg-light p-3 rounded"><code class="language-typescript">class Collection&lt;T extends { _id?: string }&gt; {
  private tableName: string;
  
  constructor(tableName: string) {
    this.tableName = tableName;
    this.ensureTableExists();
    this.ensureIndexes();
  }

  // CRUD Operations
  findOne(query: Partial&lt;T&gt;): T | null
  find(query: Partial&lt;T&gt; = {}): T[]
  insertOne(doc: T): { insertedId: string }
  updateOne(filter: Partial&lt;T&gt;, update: UpdateOptions): UpdateResult
  deleteOne(filter: Partial&lt;T&gt;): { deletedCount: number }
}</code></pre>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">2. Singleton Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Ensures single database connection instance</p>
                                    <p class="mb-3"><strong>Implementation:</strong> SQLite database connection in sqlite.ts</p>
                                    <pre class="bg-light p-3 rounded"><code class="language-typescript">// Development mode singleton
if (process.env.NODE_ENV === "development") {
  let globalWithSqlite = global as typeof globalThis & {
    _sqliteDatabase?: BetterSqlite3.Database;
  };

  if (!globalWithSqlite._sqliteDatabase) {
    globalWithSqlite._sqliteDatabase = new BetterSqlite3(DB_PATH);
    initDatabase(globalWithSqlite._sqliteDatabase);
  }
  db = globalWithSqlite._sqliteDatabase;
}</code></pre>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">3. Factory Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Creates database client instances</p>
                                    <p class="mb-3"><strong>Implementation:</strong> getDbClient function in db.ts</p>
                                    <pre class="bg-light p-3 rounded"><code class="language-typescript">export function getDbClient() {
  return {
    db: function(dbName: string) {
      return {
        collection: function&lt;T extends { _id?: string }&gt;(collectionName: string) {
          return new Collection&lt;T&gt;(collectionName);
        }
      };
    }
  };
}</code></pre>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">4. Strategy Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Handles different types of database operations</p>
                                    <p class="mb-3"><strong>Implementation:</strong> Relations class for handling relationships</p>
                                    <pre class="bg-light p-3 rounded"><code class="language-typescript">export class Relations {
  static async linkDocumentToActivity(documentId: string, activityId: string): Promise&lt;void&gt;
  static async unlinkDocumentFromActivity(documentId: string, activityId: string): Promise&lt;void&gt;
  static getDocumentsByActivityId(activityId: string): string[]
  static getActivitiesByDocumentId(documentId: string): string[]
}</code></pre>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">5. Adapter Pattern</h4>
                                    <p class="mb-2"><strong>Purpose:</strong> Adapts MongoDB-like operations to SQLite</p>
                                    <p class="mb-3"><strong>Implementation:</strong> Collection class methods mimicking MongoDB operations</p>
                                    <pre class="bg-light p-3 rounded"><code class="language-typescript">// MongoDB-like operations
updateOne(
  filter: Partial&lt;T&gt;,
  update: { 
    $set?: Partial&lt;T&gt;, 
    $addToSet?: Record&lt;string, any&gt;, 
    $pull?: Record&lt;string, any&gt; 
  }
): { matchedCount: number, modifiedCount: number }</code></pre>
                                </div>

                                <div class="pattern-section mb-4">
                                    <h4 class="h5 mb-3">Benefits of Used Patterns</h4>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <ul class="list-unstyled ms-4">
                                                <li class="mb-3">
                                                    <strong>Repository Pattern:</strong>
                                                    <ul class="list-unstyled ms-4">
                                                        <li>• Centralizes data access logic</li>
                                                        <li>• Provides consistent interface</li>
                                                        <li>• Makes testing easier</li>
                                                    </ul>
                                                </li>
                                                <li class="mb-3">
                                                    <strong>Singleton Pattern:</strong>
                                                    <ul class="list-unstyled ms-4">
                                                        <li>• Ensures single database connection</li>
                                                        <li>• Prevents resource waste</li>
                                                        <li>• Maintains connection state</li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <ul class="list-unstyled ms-4">
                                                <li class="mb-3">
                                                    <strong>Factory Pattern:</strong>
                                                    <ul class="list-unstyled ms-4">
                                                        <li>• Flexible object creation</li>
                                                        <li>• Encapsulates creation logic</li>
                                                        <li>• Easy to extend</li>
                                                    </ul>
                                                </li>
                                                <li class="mb-3">
                                                    <strong>Adapter Pattern:</strong>
                                                    <ul class="list-unstyled ms-4">
                                                        <li>• Makes SQLite work like MongoDB</li>
                                                        <li>• Reduces learning curve</li>
                                                        <li>• Maintains consistent API</li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Class Diagrams -->
    <!-- <section id="class-diagrams" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card border-0 shadow rounded-4 p-4 bg-white" data-aos="fade-up">
                        <div class="card-body">
                            <h2 class="mb-4">Class Diagrams</h2>
                            
                            <div class="image-placeholder bg-light rounded-4 d-flex align-items-center justify-content-center" style="height: 400px;">
                                <p class="text-muted">Class Diagram</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section> -->

    <!-- Data Storage -->
    <section id="data-storage" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card border-0 shadow rounded-4 p-4 bg-white" data-aos="fade-up">
                        <div class="card-body">
                            <h2 class="mb-4">Data Storage</h2>
                            
                            <h3 class="h4 mb-4">Data Schema</h3>
                            <img src="assets/images/graphs-n-schemas/er-diagram.png" alt="ER Diagram" class="img-fluid rounded-4 mb-4" style="max-height: 800px; width: auto; display: block; margin: 0 auto;">

                            <div class="mt-4">
                                <h4 class="h5 mb-3">Database Structure Overview</h4>
                                <p class="mb-4">The database implements a hybrid approach combining SQLite's ACID compliance with document-based storage flexibility, enabling both structured relationships and dynamic data storage.</p>

                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <h5 class="h6 fw-bold mb-3">Base Collection Structure</h5>
                                        <ul class="list-unstyled ms-4">
                                            <li>• Universal fields: id, data, created_at, updated_at</li>
                                            <li>• JSON document storage in data field</li>
                                            <li>• Timestamp tracking for all records</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <h5 class="h6 fw-bold mb-3">Main Collections</h5>
                                        <ul class="list-unstyled ms-4">
                                            <li>• Activities: Activity information</li>
                                            <li>• Documents: Document metadata</li>
                                            <li>• Assets: Asset information</li>
                                            <li>• Organizations: Organization data</li>
                                            <li>• Scenes: Scene information</li>
                                            <li>• PairingCodes: Organization access codes</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <h5 class="h6 fw-bold mb-3">Relationships & Junction Tables</h5>
                                        <ul class="list-unstyled ms-4">
                                            <li>• ActivityDocuments: Many-to-many activity-document relations</li>
                                            <li>• Scene-Activity relationships</li>
                                            <li>• Organization-Scene associations</li>
                                            <li>• Configuration linkages</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <h5 class="h6 fw-bold mb-3">Configuration Collections</h5>
                                        <ul class="list-unstyled ms-4">
                                            <li>• ScenesConfiguration: Scene-level settings</li>
                                            <li>• SceneConfiguration: Object-level configurations</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <h5 class="h6 fw-bold mb-3">Pairing System Structure</h5>
                                        <ul class="list-unstyled ms-4">
                                            <li>• Unique pairing codes</li>
                                            <li>• Organization references</li>
                                            <li>• Timestamp tracking</li>
                                            <li>• Active status management</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <h5 class="h6 fw-bold mb-3">Index Structure</h5>
                                        <ul class="list-unstyled ms-4">
                                            <li>• idx_scenes_activity: Activity indexing</li>
                                            <li>• idx_scenes_org: Organization indexing</li>
                                            <li>• idx_scene_config: Configuration indexing</li>
                                            <li>• Universal updated_at indexing</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <h5 class="h6 fw-bold mb-3">Key Features</h5>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <ul class="list-unstyled ms-4">
                                                <li>• Flexible document storage</li>
                                                <li>• Strong entity relationships</li>
                                                <li>• Organization-based access control</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <ul class="list-unstyled ms-4">
                                                <li>• Comprehensive asset management</li>
                                                <li>• Efficient document handling</li>
                                                <li>• Secure pairing system</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Packages and APIs -->
    <section id="packages-apis" class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card border-0 shadow rounded-4 p-4 bg-white" data-aos="fade-up">
                        <div class="card-body">
                            <h2 class="mb-4">Packages and APIs</h2>

                            <!-- NextJS Admin App -->
                            <div class="mb-5">
                                <h3 class="h4 mb-4">NextJS Admin App</h3>

                                <div class="mb-4">
                                    <h4 class="h5 mb-3">Core Dependencies</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Framework and Runtime</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• Next.js (v15.1.3)</li>
                                                <li>• React (v19.0.0)</li>
                                                <li>• Electron (v35.0.0)</li>
                                                <li>• TypeScript (v5)</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Database</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• better-sqlite3 (v11.8.1)</li>
                                                <li>• sqlite3 (v5.1.7)</li>
                                                <li>• mongodb (v6.12.0)</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Authentication & Security</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• @clerk/nextjs (v6.9.6)</li>
                                                <li>• jose (v5.9.6)</li>
                                                <li>• zod (v3.24.2)</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Cloud Storage</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• ibm-cos-sdk (v1.14.0)</li>
                                                <li>• formidable (v3.5.2)</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <h5 class="h6 fw-bold mb-2">UI Components</h5>
                                        <ul class="list-unstyled ms-4">
                                            <li>• @radix-ui/react-* (Alert Dialog, Checkbox, Dialog, etc.)</li>
                                            <li>• lucide-react (v0.469.0)</li>
                                            <li>• tailwindcss (v3.4.1)</li>
                                            <li>• tailwind-merge (v2.6.0)</li>
                                            <li>• class-variance-authority (v0.7.1)</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <h4 class="h5 mb-3">API Endpoints</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Authentication & Organization</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• POST /api/pairing/generate</li>
                                                <li>• POST /api/pairing/validate</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Asset Management</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• GET/PATCH/DELETE /api/assets/[assetId]</li>
                                                <li>• GET /api/assets/[assetId]/access</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Document Management</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• GET/POST /api/documents</li>
                                                <li>• DELETE /api/documents/[documentId]</li>
                                                <li>• POST /api/documents/[documentId]/unlink</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Activity Management</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• GET/POST /api/activities</li>
                                                <li>• GET/PATCH/DELETE /api/activities/[activityId]</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ubiq Genie -->
                            <div class="mb-5">
                                <h3 class="h4 mb-4">Ubiq Genie Framework</h3>

                                <div class="mb-4">
                                    <h4 class="h5 mb-3">Core Framework Dependencies</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Ubiq Framework</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• ubiq-server: Server-side networking</li>
                                                <li>• ubiq: Client-side networking</li>
                                                <li>• Real-time communication</li>
                                                <li>• Room & peer management</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Node.js Dependencies</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• ws: WebSocket client/server</li>
                                                <li>• nconf: Configuration management</li>
                                                <li>• dotenv: Environment variables</li>
                                                <li>• EventEmitter: Event handling</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <h4 class="h5 mb-3">API Endpoints</h4>
                                    <div class="row">
                                        <div class="col-md-12 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Room Management</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• /ws/room: Room management</li>
                                                <li>• /ws/peer: Peer connections</li>
                                                <li>• /ws/media: Media streaming</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <h4 class="h5 mb-3">Performance Requirements</h4>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h5 class="h6 fw-bold mb-2">API Latency</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• WebSocket: < 50ms</li>
                                                <li>• REST: < 100ms</li>
                                                <li>• LLM: < 200ms</li>
                                                <li>• STT/TTS: < 150ms</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h5 class="h6 fw-bold mb-2">Resource Usage</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• Memory: < 2GB per service</li>
                                                <li>• CPU: < 50% per core</li>
                                                <li>• Network: < 10MB/s per connection</li>
                                                <li>• Storage: < 1GB per service</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- AI Services -->
                            <div class="mb-5">
                                <h3 class="h4 mb-4">AI Services</h3>

                                <div class="mb-4">
                                    <h4 class="h5 mb-3">API Endpoints</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">WebSocket Endpoints</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• /ws/stt: Speech-to-Text streaming</li>
                                                <li>• /ws/tts: Text-to-Speech streaming</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">REST Endpoints</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• POST /stt: Speech-to-Text conversion</li>
                                                <li>• POST /tts: Text-to-Speech synthesis</li>
                                                <li>• POST /query: RAG queries</li>
                                                <li>• POST /generate: LLM generation</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <h4 class="h5 mb-3">LLM Server (Granite)</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Core Components</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• llama.cpp: Core inference engine</li>
                                                <li>• cpp-httplib: HTTP server</li>
                                                <li>• Model: 3.2B parameters (quantized)</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Configuration</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• GPU Layers: 99</li>
                                                <li>• Context Size: 8192 tokens</li>
                                                <li>• CPU Threads: 4</li>
                                                <li>• Temperature: 0.8</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <h4 class="h5 mb-3">Speech Processing Server</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Key Packages</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• FastAPI (v0.115.11)</li>
                                                <li>• faster-whisper (v1.1.1)</li>
                                                <li>• WhisperSpeech (v0.8.9)</li>
                                                <li>• torchaudio (v2.6.0)</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <h5 class="h6 fw-bold mb-2">Models</h5>
                                            <ul class="list-unstyled ms-4">
                                                <li>• STT: Whisper "base" model</li>
                                                <li>• TTS: WhisperSpeech "s2a-q4-tiny-en+pl"</li>
                                                <li>• Audio: 24kHz to 48kHz resampling</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer py-5 bg-dark text-white">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-4 mb-md-0">
                    <h5>Portalt</h5>
                    <p class="small">A revolutionary VR/AR platform for creating interactive, customizable virtual tours.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="mb-0">© 2025 Team 20. All rights reserved.</p>
                    <a href="https://github.com/your-repo" class="github-link mt-2" target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="script.js"></script>
</body>
</html>
